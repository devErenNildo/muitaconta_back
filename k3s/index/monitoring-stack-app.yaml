#apiVersion: argoproj.io/v1alpha1
#kind: Application
#metadata:
#  name: monitoring-stack
#  namespace: argocd
#spec:
#  project: default
#  source:
#    repoURL: 'https://prometheus-community.github.io/helm-charts'
#    chart: kube-prometheus-stack
#    targetRevision: '57.0.0'
#    helm:
#      values: |
#        prometheusOperator:
#          serviceMonitorNamespaceSelector:
#            matchExpressions:
#            - key: kubernetes.io/metadata.name
#              operator: In
#              values:
#              - monitoring
#              - muita-conta-api
#          serviceMonitorSelector: {}
#        prometheus:
#          prometheusSpec:
#            serviceMonitorNamespaceSelector:
#              matchExpressions:
#              - key: kubernetes.io/metadata.name
#                operator: In
#                values:
#                - monitoring
#                - muita-conta-api
#            serviceMonitorSelector: {}
#
#            #--Limites---------
#            prometheus:
#              prometheusSpec:
#                resources:
#                  requests: 100m
#                  memory: 512Mi
#                limits:
#                  cpu: 500m
#                  memory: 1Gi
#        grafana:
#          resources:
#            requests:
#              cpu: 50m
#              memory: 128Mi
#            limits:
#              cpu: 200m
#              memory: 256Mi
#        kubeStateMetrics:
#          resources:
#            requests:
#              cpu: 50m
#              memory: 128Mi
#            limits:
#              cpu: 100m
#              memory: 256Mi
#        nodeExporter:
#          resources:
#            requests:
#              cpu: 20m
#              memory: 64Mi
#            limits:
#              cpu: 100m
#              memory: 128Mi
#
#        #---Desabilitando---
#        alertmanager:
#          enabled: false
#
#  destination:
#    server: 'https://kubernetes.default.svc'
#    namespace: monitoring
#  syncPolicy:
#    automated:
#      prune: true
#      selfHeal: true
#    syncOptions:
#      - ServerSideApply=true